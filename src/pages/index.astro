---
import Layout from '../layouts/Layout.astro';
import { JournalPreview } from '../components/JournalPreview';
import { SelectedProjects } from '../components/SelectedProjects';
import { Newsletter } from '../components/Newsletter';
import { getCollection } from 'astro:content';

const entries = await getCollection('journal');
const sortedEntries = entries.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<Layout title="Home">
  <!-- Hero Section -->
  <section class="relative min-h-[85vh] flex items-center justify-center overflow-hidden pt-20">
    <!-- Gradient Blobs Background -->
    <div class="absolute inset-0 w-full h-full overflow-hidden">
      <div
        class="absolute top-1/4 left-1/4 w-[30rem] h-[30rem] bg-brand-500/15 rounded-full blur-[120px] animate-float"
      ></div>
      <div
        class="absolute bottom-1/4 right-1/4 w-[25rem] h-[25rem] bg-purple-500/10 rounded-full blur-[100px] animate-float-delayed"
      ></div>
    </div>

    <!-- Subtle grain overlay -->
    <div class="absolute inset-0 bg-[url('/noise.svg')] opacity-[0.07] mix-blend-overlay pointer-events-none"></div>

    <!-- Content -->
    <div class="relative z-10 max-w-4xl mx-auto px-6 text-center">
      <h1 
        class="text-5xl md:text-6xl lg:text-7xl font-bold font-display tracking-tight text-white mb-6 leading-[1.05] opacity-0 animate-fade-in-up"
      >
        Debugging the 
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-300 via-brand-400 to-purple-400">
          self.
        </span>
      </h1>
      
      <p 
        class="text-lg md:text-xl text-slate-300/90 leading-relaxed mb-10 max-w-2xl mx-auto opacity-0 animate-fade-in-up"
        style="animation-delay: 0.15s;"
      >
        Engineering principles applied to sleep, focus, and decision-making. 
        No hype. Just honest metrics and documented failures.
      </p>
      
      <div 
        class="flex flex-wrap justify-center gap-4 opacity-0 animate-fade-in-up"
        style="animation-delay: 0.3s;"
      >
        <a
          href="/journal"
          class="group px-7 py-3.5 bg-white text-slate-950 font-semibold rounded-full hover:bg-slate-100 transition-all hover:shadow-lg hover:shadow-white/10 hover:scale-[1.02] active:scale-[0.98]"
        >
          Read the journal
        </a>
        <a
          href="/about"
          class="px-7 py-3.5 border border-slate-700 text-white rounded-full hover:border-brand-400/50 hover:bg-brand-400/5 transition-all hover:scale-[1.02] active:scale-[0.98]"
        >
          About this project
        </a>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 text-slate-500 animate-bounce">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
      </svg>
    </div>
  </section>

  <!-- Latest Journal Entries -->
  <JournalPreview client:visible entries={sortedEntries} />

  <!-- Projects -->
  <SelectedProjects client:visible projects={sortedProjects} />

  <!-- Newsletter -->
  <Newsletter client:visible />
</Layout>
